webpackJsonp(["rank"],{"+qWx":function(e,t){e.exports=vendor},"5J4U":function(e,t){},"7GHf":function(e,t,n){"use strict";var a=n("+6Bu"),r=n.n(a),o=n("U7vG"),i=n.n(o),c=n("XagN"),s=(n.n(c),function(e){var t=e.title,n=e.children,a=r()(e,["title","children"]);return i.a.createElement("div",{className:"m-head f-cb"},i.a.createElement("h2",null,t||""),i.a.createElement("a",{className:"f-fr",href:"/","data-log":a["data-log"]},"首页"),n||"")});t.a=s},"7ULW":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("U7vG"),o=n.n(r),i=n("O27J"),c=n("mvHQ"),s=n.n(c),u=n("Zx67"),l=n.n(u),d=n("Zrlr"),h=n.n(d),f=n("wxAW"),m=n.n(f),p=n("zwoO"),v=n.n(p),g=n("Pf15"),k=n.n(g),b=n("D/cR"),w=n("tBL+"),E=n("YCIw"),x=n("7GHf"),y=n("woOf"),O=n.n(y),N=n("vPHJ"),_=n("cvfO"),L=n("EMs1"),T=function(e){function t(){h()(this,t);var e=v()(this,(t.__proto__||l()(t)).call(this)),n=Object(N.h)();return e.state=O()({},e.state,{pageSize:20,hasMore:!1,isLoading:!0,channel:n.channel||e.state.channel}),e.loadMore=e.loadMore.bind(e),e}return k()(t,e),m()(t,[{key:"fetch",value:function(e){var t=this,n=this.state,a=n.channel,r=n.page,o=n.pageSize,i=O()({channel:a,page:r,pageSize:o},e);Object(b.a)("/rank/books.json",i).then(function(e){if(0===e.code&&e.books){var n=t.state.bookList.concat(e.books),a=!!e.nextUrl;t.setState({channel:i.channel,page:i.page+1,bookList:n,hasMore:a,isLoading:!1})}else t.setState({hasMore:!1,isLoading:!1})})}},{key:"switchChannel",value:function(e){var t=this;this.setState({bookList:[],hasMore:!1,isLoading:!0},function(){return t.fetch({channel:e,page:1})})}},{key:"loadMore",value:function(){this.fetch()}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"render",value:function(){var e=this.state,t=(e.bookList,e.hasMore),n=e.isLoading;e.channel;return o.a.createElement("div",{id:"BookRank"},this.renderTabs(),o.a.createElement(_.a,{hasMore:t,loadMore:this.loadMore,isLoading:n},this.renderRankList()))}}]),t}(L.a),A=(n("twQz"),Object(E.a)(a=function(e){function t(){return h()(this,t),v()(this,(t.__proto__||l()(t)).call(this))}return k()(t,e),m()(t,[{key:"componentDidMount",value:function(){Object(w.a)({dot:"c5-1"})}},{key:"render",value:function(){return o.a.createElement("div",{className:"g-wrap",id:"RankApp"},o.a.createElement(x.a,{"data-log":s()({dot:"c5-2"})}),o.a.createElement(T,{logData:{dots:{tab:"c5-3",bookItem:"c5-4"}}}))}}]),t}(r.Component))||a);n("8nng"),n("NHKQ"),n("1lB/");Object(i.render)(o.a.createElement(A,null),document.getElementById("root"))},"8nng":function(e,t,n){"use strict";var a=n("+6Bu"),r=n.n(a),o=n("Zrlr"),i=n.n(o),c=n("wxAW"),s=n.n(c),u=n("tBL+"),l=n("vPHJ"),d=function(){function e(t){var n=this;i()(this,e),this._handleDocClick=function(e){var t=n._getTargetElement(e);if(t){var a=t.dataset.log;if(a&&(n.capture(a),"A"===t.tagName.toUpperCase())){var r=t.href;if(!r||0===r.indexOf("javascript")||"_blank"===t.getAttribute("target"))return;e.preventDefault(),setTimeout(function(){window.location.href=t.href},200)}}},this._logToBackend=function(e){if(location.href.indexOf("pay.kuxuanbook")>-1){var t=Object(l.h)(),n=(t.targetUrl,t.shareUrl,r()(t,["targetUrl","shareUrl"]));Object(u.b)(JSON.parse(e),n)}else Object(u.a)(JSON.parse(e))},this.capture=function(e){n._logToBackend(e)},this._handleDocClick=this._handleDocClick.bind(this),this._addEventListeners()}return s()(e,[{key:"_addEventListeners",value:function(){document.addEventListener("click",this._handleDocClick,!0)}},{key:"_getTargetElement",value:function(e){for(var t=e.target;t;){if(t.dataset&&t.dataset.log)return t;t=t.parentNode}return null}}]),e}();new d},BEQ0:function(e,t,n){e.exports=n("+qWx")(3)},"BK/k":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var a=n("VkW9"),r=n.n(a),o=new r.a,i=o.get("XSRF-TOKEN")},"D/cR":function(e,t,n){"use strict";function a(e){var t=[];for(var n in e)!function(n){Array.isArray(e[n])?e[n].forEach(function(e){t.push(n+"[]="+e)}):t.push(n+"="+e[n])}(n);return t.join("&")}t.c=a,n.d(t,"a",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return h});var r=n("Xxa5"),o=n.n(r),i=n("exGp"),c=n.n(i),s=n("rplX"),u=(n.n(s),n("BK/k")),l=function(){var e=c()(o.a.mark(function e(t){var n,r,i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(c),n.length>0&&(t+="?"+n),e.next=4,fetch(t,{method:"GET",credentials:"same-origin"});case 4:if(r=e.sent,r.ok){e.next=7;break}throw new Error("网络错误:"+r.status);case 7:return i=void 0,e.prev=8,e.next=11,r.json();case 11:i=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),new Error("服务器错误");case 17:if(!1!==i.success){e.next=21;break}throw new Error(i.msg||"请求失败");case 21:return-401===i.code&&location.reload(),e.abrupt("return",i);case 23:case"end":return e.stop()}},e,this,[[8,14]])}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=c()(o.a.mark(function e(t){var n,r,i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(s),n.length>0&&(t+="?"+n),e.next=4,fetch(t,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","X-XSRF-TOKEN":u.b},body:a(c)});case 4:if(r=e.sent,r.ok){e.next=7;break}throw new Error("网络错误:"+r.status);case 7:return i=void 0,e.prev=8,e.next=11,r.json();case 11:i=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),new Error("服务器错误");case 17:if(!1!==i.success){e.next=21;break}throw new Error(i.msg||"请求失败");case 21:return-401===i.code&&location.reload(),e.abrupt("return",i);case 23:case"end":return e.stop()}},e,this,[[8,14]])}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=c()(o.a.mark(function e(t){var n,r,i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(c),n.length>0&&(t+="?"+n),e.next=4,fetch(t,{method:"GET",credentials:"same-origin",mode:"cors"});case 4:if(r=e.sent,r.ok){e.next=7;break}throw new Error("网络错误:"+r.status);case 7:return i=void 0,e.prev=8,e.next=11,r.json();case 11:i=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),new Error("服务器错误");case 17:if(!1!==i.success){e.next=21;break}throw new Error(i.msg||"请求失败");case 21:return-401===i.code&&location.reload(),e.abrupt("return",i);case 23:case"end":return e.stop()}},e,this,[[8,14]])}));return function(t){return e.apply(this,arguments)}}()},EMs1:function(e,t,n){"use strict";var a=n("mvHQ"),r=n.n(a),o=n("Zx67"),i=n.n(o),c=n("Zrlr"),s=n.n(c),u=n("wxAW"),l=n.n(u),d=n("zwoO"),h=n.n(d),f=n("Pf15"),m=n.n(f),p=n("U7vG"),v=n.n(p),g=n("D/cR"),k=n("NLTj"),b=n("UtWw"),w=n("5J4U"),E=(n.n(w),function(e){function t(){s()(this,t);var e=h()(this,(t.__proto__||i()(t)).call(this));return e.state={channel:"male",bookList:[],page:1,pageSize:20},e.tabOrderMap={female:0,male:1,publish:2},e}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"switchChannel",value:function(e){var t=this;this.setState({channel:e,page:1},function(){t.fetch(),t.props.onChannelChange&&t.props.onChannelChange(e)})}},{key:"fetch",value:function(){var e=this,t=this.state,n=t.channel,a=(t.page,t.pageSize,{channel:n,page:1,pageSize:20});Object(g.a)("/rank/books.json",a).then(function(t){if(t.books){var n=t.books.slice(0,10);e.setState({bookList:n})}})}},{key:"renderBookList",value:function(e){var t=this.state.channel,n=this.props.logData||{},a=n.dots;return e.map(function(e,n){return v.a.createElement("li",{key:e.sourceUuid+n},v.a.createElement("a",{className:"link f-cb",href:"/book/reader.do?sourceUuid="+e.sourceUuid,"data-log":r()({dot:a.bookItem,message:{pos:n+3,channel:t}})},v.a.createElement("span",{className:n+4<100?"index":"index index-s"},n+4,"."),e.category?v.a.createElement("span",{className:"tag"},e.category):"",v.a.createElement("span",{className:"title"},e.title),v.a.createElement("span",{className:"author f-fr"},e.author)))})}},{key:"renderTabs",value:function(){var e=this.state.channel,t=this.props.logData||{},n=t.dots;return v.a.createElement(k.a,{initIndex:this.tabOrderMap[e]},v.a.createElement("div",{title:"女生",action:this.switchChannel.bind(this,"female"),"data-log":r()({dot:n.tab,message:{channel:"female"}})}),v.a.createElement("div",{title:"男生",action:this.switchChannel.bind(this,"male"),"data-log":r()({dot:n.tab,message:{channel:"male"}})}),v.a.createElement("div",{title:"出版",action:this.switchChannel.bind(this,"publish"),"data-log":r()({dot:n.tab,message:{channel:"publish"}})}))}},{key:"renderRankList",value:function(){var e=this.state,t=e.bookList,n=e.channel,a=this.props.logData||{},r=a.dots,o={dot:r.bookItem,message:{channel:n}};return v.a.createElement("div",{className:"m-rankList"},v.a.createElement(b.a,{bookList:t,showRank:!0,logData:o}),v.a.createElement("ul",{className:"m-booklist-text"},this.renderBookList(t.slice(3))))}},{key:"render",value:function(){return v.a.createElement("div",{id:"BookRank"},this.renderTabs(),this.renderRankList())}}]),t}(p.Component));t.a=E},HJfm:function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return s});var a={FIRST_ENTER:"firstEnter",ACTIVITY:"activity",SIGN:"sign",GUIDE:"guide"},r={BOOK_NOT_FOUND:"bookNotFound",REQUEST_ERROR:"requestError",CUSTOM_ERROR:"customError"},o={WX_JSAPI:"WX_JSAPI",WX_NATIVE:"WX_NATIVE",ALIPAY:"ALIPAY"},i={TEST:"test",PRE:"pre",ONLINE:"online"},c={FEEDBACK:0,COMPLAINT:1},s={SIGN_MODAL:"1",SIGN_BOTTOM:"2",READER_RMD:"3",READER_BANNER:"4"}},NHKQ:function(e,t,n){n.p=window.cdn||"/dist/"},NLTj:function(e,t,n){"use strict";var a=n("Zx67"),r=n.n(a),o=n("Zrlr"),i=n.n(o),c=n("wxAW"),s=n.n(c),u=n("zwoO"),l=n.n(u),d=n("Pf15"),h=n.n(d),f=n("U7vG"),m=n.n(f),p=n("3Mnf"),v=(n.n(p),function(e){function t(e){i()(this,t);var n=l()(this,(t.__proto__||r()(t)).call(this));return n.state={currentIndex:e.initIndex||0,action:e.initAction||""},n}return h()(t,e),s()(t,[{key:"componentDidMount",value:function(){var e=this.state.action;e&&e()}},{key:"componentWillReceiveProps",value:function(e){void 0!=e.currentIndex&&this.setState({currentIndex:e.currentIndex})}},{key:"switchTab",value:function(e,t,n){this.setState({currentIndex:e},t&&t())}},{key:"checkTitleIndex",value:function(e){return e===this.state.currentIndex?"tabtitle crt":"tabtitle"}},{key:"checkPanelIndex",value:function(e){return e===this.state.currentIndex?"tabpanel active":"tabpanel"}},{key:"render",value:function(){var e=this;this.props.tabName;return m.a.createElement("div",{id:"tabs"},m.a.createElement("ul",{className:"m-tabtitle crt-"+this.state.currentIndex,id:"J_appTab"},this.props.children.map(function(t,n){return m.a.createElement("li",{key:t.props.title,onClick:e.switchTab.bind(e,n,t.props.action),className:e.checkTitleIndex.bind(e,n)(),"data-log":t.props["data-log"]},t.props.title,m.a.createElement("b",null))})),m.a.createElement("div",{className:"m-tabpanel"},this.props.children.map(function(t,n){return m.a.createElement("div",{key:"tabpanel_"+t.props.title,className:e.checkPanelIndex.bind(e,n)()},t.props.children)})))}}]),t}(f.Component));t.a=v},O27J:function(e,t,n){e.exports=n("+qWx")(76)},U7vG:function(e,t,n){e.exports=n("+qWx")(77)},UtWw:function(e,t,n){"use strict";var a=n("bOdI"),r=n.n(a),o=n("Dd8w"),i=n.n(o),c=n("mvHQ"),s=n.n(c),u=n("U7vG"),l=n.n(u),d=n("uZWh"),h=(n.n(d),function(e){var t=e.bookList,n=e.showRank,a=void 0!==n&&n,o=e.logData,c=void 0===o?{}:o;t&&t.length>3&&(t=t.slice(0,3));var u=c.dot,d=c.message;return l.a.createElement("div",{className:"m-booklist-h3 f-cb"},(t||[]).map(function(e,t){return l.a.createElement("li",r()({key:e.sourceUuid,className:2===t?"f-fl ll":"f-fl"},"key",e.sourceUuid),l.a.createElement("a",{href:"/book/reader.do?sourceUuid="+e.sourceUuid,"data-log":s()({dot:u,message:i()({pos:t},d)})},l.a.createElement("span",{className:"bookCover"},l.a.createElement("img",{src:e.cover+"?imageView&thumbnail=202y284",srcSet:e.cover+"?imageView&thumbnail=202y284 2x,"+e.cover+"?imageView&thumbnail=303y426 3x"}),a?l.a.createElement("b",{className:"index"},t+1):""),l.a.createElement("h3",null,e.title),l.a.createElement("p",{className:"author"},e.author)))}))});t.a=h},YCIw:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n("Zx67"),r=n.n(a),o=n("Zrlr"),i=n.n(o),c=n("wxAW"),s=n.n(c),u=n("zwoO"),l=n.n(u),d=n("Pf15"),h=n.n(d),f=n("U7vG"),m=n.n(f),p=n("D/cR"),v=n("BK/k"),g=function(e){return function(t){function n(e){return i()(this,n),l()(this,(n.__proto__||r()(n)).call(this,e))}return h()(n,t),s()(n,[{key:"componentDidMount",value:function(){if(!v.a.get("N_userAccess")){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59);v.a.set("N_userAccess",!0,{expires:t,path:"/"}),this.countUserAccess()}}},{key:"countUserAccess",value:function(){Object(p.d)("/countUserAccess.do")}},{key:"render",value:function(){return m.a.createElement("div",{className:"g-wrap",style:{padding:"0"}},m.a.createElement(e,this.props))}}]),n}(f.Component)}},cvfO:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var a,r,o=n("Dd8w"),i=n.n(o),c=n("woOf"),s=n.n(c),u=n("Zx67"),l=n.n(u),d=n("Zrlr"),h=n.n(d),f=n("wxAW"),m=n.n(f),p=n("zwoO"),v=n.n(p),g=n("Pf15"),k=n.n(g),b=n("U7vG"),w=n.n(b),E=n("vPHJ"),x=n("0nzA"),y=(n.n(x),r=a=function(e){function t(e){h()(this,t);var n=v()(this,(t.__proto__||l()(t)).call(this,e));return n.state=s()({},e),n.handleScroll=n.handleScroll.bind(n),n}return k()(t,e),m()(t,[{key:"handleScroll",value:function(){var e=this.container,t=this.state,n=t.hasMore,a=t.loadMore,r=t.offset,o=t.threshold,i=t.isLoading;n&&!i&&e&&window.pageYOffset>e.offsetHeight+Object(E.i)(e)-window.innerHeight-r-o&&this.setState({isLoading:!0},function(){return a()})}},{key:"renderFirstPage",value:function(){var e=this.container,t=this.state,n=t.hasMore,a=t.loadMore,r=t.isLoading;n&&!r&&e&&e.offsetHeight+Object(E.i)(e)<window.innerHeight&&this.setState({isLoading:!0},function(){return a()})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState(i()({},e),function(){return t.renderFirstPage()})}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.state.isLoading,n=this.props.children;return w.a.createElement("div",{ref:function(t){return e.container=t},className:"m-container"},n,t?w.a.createElement("p",{className:"m-addmore"},"加载中",w.a.createElement("i",{className:"one"}),w.a.createElement("i",{className:"two"}),w.a.createElement("i",{className:"three"})):"")}}]),t}(b.Component),a.defaultProps={hasMore:!1,loadMore:function(){},offset:0,threshold:10,isLoading:!1},r)},"tBL+":function(e,t,n){"use strict";function a(e,t){var n=e.dot,a=e.message,r={dot:n};a&&(r.message=l()(a)),Object(d.a)("/statistics/log/upload.json",r).then(function(e){t&&t()})}function r(e){var t=e.dot,n=e.message,a={dot:t};n&&(a.message=l()(n));var r=new XMLHttpRequest;r.open("get","/statistics/log/upload.json?"+Object(d.c)(a),!1),r.send(null)}function o(e,t,n){var a=e.dot,r=e.message,o=s()({dot:a},t);r&&(o.message=l()(r));var i=Object(h.c)();Object(d.b)(i+"/statistics/log/cors/logUpload.json",o).then(function(e){n&&n()})}function i(e,t,n){var a=e.dot,r=e.message,o=s()({dot:a},t);r&&(o.message=l()(r)),Object(d.b)("/statistics/log/cors/logUpload.json",o).then(function(e){n&&n()})}n.d(t,"a",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i});var c=n("Dd8w"),s=n.n(c),u=n("mvHQ"),l=n.n(u),d=n("D/cR"),h=n("vPHJ")},twQz:function(e,t){},uZWh:function(e,t){},vPHJ:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"h",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"i",function(){return l}),n.d(t,"g",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return f});var a=n("HJfm"),r=function(e){return e&&e.replace(/[\n\r]+/g," ").replace(/\t/g," ").replace(/\<p\>/gi,"").replace(/\<\/p\>/gi,"")},o=function(){var e=window.location.search,t=new RegExp("([^?=&]+)(=([^&]*))?","g"),n={};return e&&e.replace(t,function(e,t,a,r){n[t]=r}),n};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n=this.length>>>0;if((t|=0)<0)t=Math.max(n-t,0);else if(t>=n)return-1;if(void 0===e){do{if(t in this&&void 0===this[t])return t}while(++t!==n)}else do{if(this[t]===e)return t}while(++t!==n);return-1});var i=function(e){document.title=e;var t=document.createElement("iframe");t.style.display="none";var n=function e(){setTimeout(function(){t.removeEventListener("load",e),setTimeout(function(){document.body.removeChild(t)},0)},0)};t.addEventListener("load",n),document.body.appendChild(t)},c=window.navigator.userAgent.toLowerCase(),s=/ipad|iphone|ipod/.test(c)&&!window.MSStream,u=function(e){var t=e.split("/");return e.indexOf("://")>-1?t[0]+"//"+t[2]:t[0]},l=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t?(n+=t.offsetTop,e(t.offsetParent,n)):n},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=+new Date,a=window.pageYOffset,r=e-a,o=requestAnimationFrame(function e(){var i=t-Math.max(0,n+t-+new Date);window.scrollTo(0,i*r/t+a),o=requestAnimationFrame(e),i==t&&cancelAnimationFrame(o)})},h=function(){return location.host.indexOf("yuedu.163.com")>-1?a.d.TEST:location.host.indexOf("pre.kuxuanbook.com")>-1?a.d.PRE:a.d.ONLINE},f=function(){var e="";return location.host.indexOf("pay.kuxuanbook")>-1?(e=location.host.indexOf("yuedu.163.com")>-1?"//www.kuxuanbook.yuedu.163.com":"//www.kuxuanbook.com",location.host.indexOf("prepay.kuxuanbook.com")>-1&&(e="//pre.kuxuanbook.com")):(e=location.host.indexOf("yuedu.163.com")>-1?"//pay.kuxuanbook.yuedu.163.com":"//pay.kuxuanbook.com",location.host.indexOf("pre.kuxuanbook.com")>-1&&(e="//prepay.kuxuanbook.com")),e}}},["7ULW"]);