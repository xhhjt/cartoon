<!doctype html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8">
    <meta content="width=device-width,height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />

    <meta name="keywords" content="动漫,喵喵漫画动漫,漫画,动画,原创,正版,火影忍者,海贼王,捕王,充气女神,喵喵漫画官方网站" />
    <meta name="description" content="正版动漫网站，连载众多原创国漫，原创动画，正版日漫等海内外最热正版动漫内容，为上千万动漫爱好者提供漫画、动画、资讯、论坛一站式全方位动漫服务，为原创动漫作者提供最优质的创作成长环境，为中国动漫产业打造梦想舞台。" />
    <link href="/assets/css/base.css?v=22" rel="stylesheet" type="text/css">
    <link href="/assets/css/loading.css" rel="stylesheet" />

    <title>喵喵漫画 - 充值</title>




</head>
<body>



<link href="/assets/css/recharge.css?v=22" rel="stylesheet" type="text/css">
<link href="/assets/css/task.css" rel="stylesheet" type="text/css">

<link href="/assets/js/layer/mobile/need/layer.css" rel="stylesheet" />
<script src="/assets/js/layer/mobile/layer.js"></script>



<input data-val="true" data-val-number="字段 UserId 必须是一个数字。" data-val-required="UserId 字段是必需的。" id="UserId" name="UserId" type="hidden" value="9027250" />


<header class="tophead">
    <a href="javascript:history.go(-1);" class="back"></a>
    充值
    <a href="/" class="home01"></a>
</header>

<form action="https://pay.ipaynow.cn" method="post" target="_top">
    <div style="display: none ">
        <label for="version">版本</label>
        <input id="version" name="version" type="text" value="1.0.0" /> <br />
        <label for="funcode">功能码</label>
        <input id="funcode" name="funcode" type="text" value="WP001" /> <br />
        <label for="appId">商户应用唯一标识</label>
        <input id="appId" name="appId" type="text" value="152879173059929" /> <br />
        <label for="mhtOrderNo">商户订单号</label>
        <input id="mhtOrderNo" name="mhtOrderNo" type="text" value="" /> <br />
        <label for="mhtOrderName">商户商品名称</label>
        <input id="mhtOrderName" name="mhtOrderName" type="text" value="" /> <br />
        <label for="mhtOrderType">商户交易类型</label>
        <input id="mhtOrderType" name="mhtOrderType" type="text" value="01" /> <br />
        <label for="mhtCurrencyType">币商户订单币种类型种</label>
        <input id="mhtCurrencyType" name="mhtCurrencyType" type="text" value="156" /> <br />
        <label for="mhtOrderDetail">商户订单详情</label>
        <input id="mhtOrderDetail" name="mhtOrderDetail" type="text" value="" /> <br />
        <label for="mhtOrderTimeOut">商户订单超时时间</label>
        <input data-val="true" data-val-number="字段 商户订单超时时间 必须是一个数字。" data-val-required="商户订单超时时间 字段是必需的。" id="mhtOrderTimeOut" name="mhtOrderTimeOut" type="text" value="1200" /> <br />
        <label for="mhtOrderAmt">商户订单交易金额</label>
        <input data-val="true" data-val-number="字段 商户订单交易金额 必须是一个数字。" data-val-required="商户订单交易金额 字段是必需的。" id="mhtOrderAmt" name="mhtOrderAmt" type="text" value="0" /> <br />
        <label for="mhtOrderStartTime">订单时间</label>
        <input id="mhtOrderStartTime" name="mhtOrderStartTime" type="text" value="" /> <br />
        <label for="notifyUrl">后台通知URL</label>
        <input id="notifyUrl" name="notifyUrl" type="text" value="http://ctn.xmh435.com/order/nownotify" /> <br />
        <label for="frontNotifyUrl">前台通知URL</label>
        <input id="frontNotifyUrl" name="frontNotifyUrl" type="text" value="http://ctn.xmh435.com/user/NowFront" /> <br />
        <label for="mhtCharset">商户字符编码</label>
        <input id="mhtCharset" name="mhtCharset" type="text" value="UTF-8" /> <br />
        <label for="deviceType">设备类型</label>
        <input id="deviceType" name="deviceType" type="text" value="0601" /> <br />
        <label for="outputType">输出格式</label>
        <input id="outputType" name="outputType" type="text" value="0" /> <br />
        <label for="payAccNo">支付账号</label>
        <input id="payAccNo" name="payAccNo" type="text" value="" /> <br />
        <label for="payChannelType">用户所选渠道类型</label>
        <input id="payChannelType" name="payChannelType" type="text" value="13" /> <br />

        <label for="mhtGoodsTag">用于营销活动</label>
        <input id="mhtGoodsTag" name="mhtGoodsTag" type="text" value="" /> <br />
        <label for="consumerCreateIp">用户ip</label>
        <input id="consumerCreateIp" name="consumerCreateIp" type="text" value="222.67.110.247" /> <br />
        <label for="mhtReserved">商户保留域</label>
        <input id="mhtReserved" name="mhtReserved" type="text" value="" /> <br />
        <label for="mhtSignType">商户签名方法</label>
        <input id="mhtSignType" name="mhtSignType" type="text" value="MD5" /> <br />
        <label for="mhtSignature">数字签名</label>
        <input id="mhtSignature" name="mhtSignature" type="text" value="" /> <br />


    </div>
</form>

<section class="block signbox">
    <div class="fl w15"><img src="http://img1.xmh222.com//user/cover/31.jpg" onerror="this.src = '/assets/images/17.jpg'" class="userheader"></div>
    <div class="fl w73">
        <p>
            <span>用户名：<sct id="showusername">PrRQTq9027316</sct></span> （<span class="red">0阅币</span>）<br>
            <span class="red">充值完成后，请按提示绑定手机</span>
        </p>
    </div>
</section>

<!--<div class="h50"></div>-->
<section class="checkBox">

    <ul class="clf" id="paylist"></ul>

    <div class="paybtnBOX clf">



        <a href="javascript:;" style="display:" class="alipay paybtn" id="alipay1" onclick="pay(1)">支付宝支付(推荐95折)</a>
        <a href="javascript:;" style="display:" class="weixinpay paybtn" id="weixinpay1" onclick="pay(5)">微信支付</a>


    </div>

    <div style="font-size:0.8em; margin:0 10px; line-height:22px; color:#666">
        注：阅币为虚拟产品，一旦购买将不退款！。如果支付出现问题，请联系客服QQ：
        <a href="mqqwpa://im/chat?chat_type=wpa&amp;uin=3257494368&amp;version=1&amp;src_type=web&amp;web_src=oicqzone.com"
           target="_blank">3257494368</a>

    </div>
</section>

<div>


</div>

<input type="hidden" value="[{&quot;id&quot;:3,&quot;coin&quot;:&quot;5800+1000&quot;,&quot;name&quot;:&quot;5800&quot;,&quot;content&quot;:&quot;多送10元，1000阅币&quot;,&quot;price&quot;:&quot;58.0&quot;,&quot;isshow&quot;:&quot;1&quot;,&quot;isdefault&quot;:&quot;0&quot;,&quot;p&quot;:0},{&quot;id&quot;:4,&quot;coin&quot;:&quot;8800+4000&quot;,&quot;name&quot;:&quot;8800&quot;,&quot;content&quot;:&quot;多送40元&quot;,&quot;price&quot;:&quot;88.0&quot;,&quot;isshow&quot;:&quot;1&quot;,&quot;isdefault&quot;:&quot;1&quot;,&quot;p&quot;:0},{&quot;id&quot;:8,&quot;coin&quot;:&quot;30&quot;,&quot;name&quot;:&quot;VIP月卡&quot;,&quot;content&quot;:&quot;108 30天免费看&quot;,&quot;price&quot;:&quot;108.0&quot;,&quot;isshow&quot;:&quot;1&quot;,&quot;isdefault&quot;:&quot;0&quot;,&quot;p&quot;:1},{&quot;id&quot;:2,&quot;coin&quot;:&quot;3800&quot;,&quot;name&quot;:&quot;3800&quot;,&quot;content&quot;:&quot;1元=100阅币&quot;,&quot;price&quot;:&quot;38.0&quot;,&quot;isshow&quot;:&quot;1&quot;,&quot;isdefault&quot;:&quot;0&quot;,&quot;p&quot;:0}]" id="showjson" />
<input type="hidden" value="%2f" id="hrurl" />
<input type="hidden" id="web" />


<script type="text/html" id="litemp">
    <li data-name="{name}" data-id="{id}" class="{select}">
        <i></i>
        <p class="red"><strong>{name}</strong>{txt}</p>
        <p class="graysmall">{summary}</p>
        <p class="needpay">￥{price}</p>
    </li>

</script>

<script type="text/html" id="litemp1">
    <!--阅币产品-->


    <li data-name="{name}" data-id="{id}" class="{select}">
        <p>￥{price}</p>
        <p class="needpay"><span class="red">{coin}</span> 阅币</p>
        <p class="graysmall">{summary}</p>
    </li>

</script>

<script type="text/html" id="litemp2">
    <!--默认产品-->

    <li data-name="{name}" data-id="{id}" class="{select}">
        <div class="defconer"></div>
        <p>￥{price}</p>
        <p class="needpay"><span class="red">{coin}</span> 阅币</p>
        <p class="graysmall">{summary} <span class="redTag" style="border-radius:3px; padding:0 3px;color:#fff">热销</span> <span class="blueTag" style="border-radius:3px; padding:0 3px; color:#fff">推荐</span></p>
    </li>

</script>

<script type="text/html" id="litemp3">
    <!--包月产品-->

    <li data-name="{name}" data-id="{id}" class="{select}">
        <p>{name}</p>
        <p class="needpay red">{summary}</p>
    </li>
</script>






<script src="/assets/js/jquery.min.js?t=1"></script>


<script>
    var check = false;
    function pay(tp) {


        //0 微信 1 支付宝
        if (check) {
            return false;

        }

        layer.open({
            type: 2
            , content: '下单中. . .',
            shadeClose: false,
        });

        check = true;
        data = { id: pid, rurl: $("#hrurl").val(), ptype: tp, web: $("#web").val() };
        //   data = { pid: pid, tp: tp, back: $("#hrurl").val() };
        $.ajax({
            url: "/user/postorder1",
            data: data,
            type: "POST",
            dataType: "json",
            success: function (msg) {

                console.log(msg);
                if (msg.code == "0") {

                    $("#showusername").html(msg.name);

                    var obj = msg;
                    if (tp == 1) {
                        location.href = "http://payapi.xiaochuanwu.com/home/ali?au=ctn.xmh435.com&orderno=" + obj.mhtOrderNo + "&type=0";

                    } else if (tp == 100) {


                        $("#payChannelType").val(obj.payChannelType);
                        $("#mhtOrderAmt").val(obj.mhtOrderAmt);
                        $("#mhtSignature").val(obj.mhtSignature);
                        $("#mhtOrderName").val(obj.mhtOrderName);
                        $("#mhtOrderDetail").val(obj.mhtOrderDetail);
                        $("#mhtOrderStartTime").val(obj.mhtOrderStartTime);
                        $("#mhtOrderNo").val(obj.mhtOrderNo);
                        $("#deviceType").val(obj.deviceType);
                        $("#appId").val(obj.appId);

                        $("form").submit();
                    } else if (tp == 5) {
                        location.href = "http://payapi.xiaochuanwu.com/home/index1?au=ctn.xmh435.com&orderno=" + obj.mhtOrderNo + "&type=0";
                    }

                    setTimeout(function () { layer.closeAll(); }, 3000);

                } else {
                    layer.closeAll();
                    layer.open({
                        content: msg.message
                        , skin: 'msg'
                        , time: 2
                    });

                }


                check = false;

            }, error: function () {

                check = false;

            }
        });

    }

</script>
<script>



    var isSubmit = 0;
    function isWeixin() {
        var ua = window.navigator.userAgent.toLowerCase();
        if (ua.indexOf("micromessenger") >= 0) {
            return true;
        } else {
            return false;
        }
    }


    var pid = 0;


    jQuery(function ($) {

        //if (isWeixin()) {

        //    $("#alipay").show();
        //    $("#weixinpay").show();


        //} else {
        //禁用点击
        //   $("#weixinpay1").show();
        //   $("#alipay1").show();

        //}


        var tt = $("#showjson").val();
        var obj = JSON.parse(tt);
        var html = "";
        var lit = $("#litemp1").html();


        $.each(obj, function (i, o) {
            lit = $("#litemp1").html();

            var that = o;
            var s = "";

            if (that.isdefault == "1") {
                pid = that.id;
                s = "selected";
                lit = $("#litemp2").html();
            }

            var txt = "阅币";

            if (that.p == 1) {
                txt = "";
                lit = $("#litemp3").html();
            }
            var coin = that.coin;

            html += lit.replace(/{name}/g, o.name).replace(/{id}/g, o.id).replace(/{txt}/g, txt).replace(/{select}/g, s).replace(/{coin}/g, coin)
                .replace(/{summary}/g, o.content).replace(/{price}/g, o.price).replace(/{id}/g, o.id);

        });


        $("#paylist").html(html);


        $("#paylist li").click(function () {

            var that = $(this);
            $("#paylist li").removeClass("selected");
            that.addClass("selected");
            pid = that.data("id");

            console.log(pid);

            if (isWeixin()) {
                //   pay(0);
                //    var token = "/recharge/alipay" + "?token=" + that.data("token");
                //   console.log(token);

                //   $("#alipay1").attr("href", token);
            }

        });
    });
</script>


</body>
</html>
